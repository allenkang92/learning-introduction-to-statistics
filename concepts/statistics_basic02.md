# 데이터 요약

## 변수의 종류

변수는 각 단위에 대해 관측되는 특성이며, 데이터는 하나 이상의 변수에 대한 관찰값의 모음입니다.

### 변수의 분류

**질적 변수(범주형 변수)와 양적 변수**

- **질적 변수(qualitative variable)**: 유한개의 범주 중 하나의 값을 취하는 변수
  - **명목형 변수(nominal variable)**: 범주들에 의미 있는 순서를 정할 수 없는 질적 변수 (예: 성별, 혈액형)
  - **순서형 변수(ordinal variable)**: 범주 간의 의미 있는 순서를 정할 수 있는 질적 변수 (예: 학력, 비만도)

- **양적 변수(quantitative variable)**: 양적인 수치로 측정되는 변수
  - **연속형 변수(continuous variable)**: 어떤 실수 구간 안의 모든 값을 가질 수 있는 변수 (예: 몸무게, 키)
  - **이산형 변수(discrete variable)**: 취할 수 있는 값을 셀 수 있는 양적 변수 (예: 자녀 수, 판매량)

### 변수의 분포

변수의 데이터에는 변동(variability)이 있으며, 변수의 분포는 변수가 취할 수 있는 모든 값에 대해 각 값이 발생하는 빈도를 나열한 것입니다.

**도수분포표(frequency table)**는 데이터에서 각 값의 출현빈도나 비슷한 값끼리 묶은 구간별로 관측된 데이터의 개수를 정리한 표입니다.

- 질적변수: 각 범주에 속하는 단위의 개수를 제시
- 양적변수: 계급을 정한 후 각 계급에 속하는 단위의 개수를 제시
  - 계급은 임의로 정할 수 있으나, 각 계급의 폭을 일정하게 하는 것이 좋습니다
  - 계급의 폭이 너무 좁으면 계급의 개수가 많아지고, 너무 넓으면 분포가 잘 드러나지 않습니다

## 데이터 요약 방법

### 질적 데이터의 요약

#### 막대그래프

각 범주에 속한 관찰값의 개수 또는 비율을 막대의 길이로 나타낸 그래프입니다.

- 명목형 변수일 때: 큰 빈도부터 작은 빈도, 또는 작은 빈도부터 큰 빈도 순서로 정렬하면 좋습니다.
- 순서형 변수일 때: 범주의 순서를 지켜서 그리는 것이 좋습니다.

#### 원그래프

각 범주에 속한 관찰값의 비율을 원의 면적으로 표현한 그래프입니다. 막대그래프에 비해 정보 파악이 어렵기 때문에 최근에는 선호되지 않습니다.

### 양적 데이터의 요약

#### 히스토그램(histogram)

도수분포표를 그래프로 나타낸 것으로, 계급을 수평축에 표시하고 각 계급의 도수에 비례하는 넓이의 직사각형을 그립니다.

히스토그램의 장점:
- 특이점(outlier)을 쉽게 찾을 수 있습니다
- 전체적인 분포를 한눈에 파악할 수 있습니다

주의점: 같은 데이터라도 계급의 폭에 따라 분포의 특성이 달라 보일 수 있습니다.

#### 분포 유형

1. **종 모양 분포(bell-shaped distribution)**
   - 좌우 대칭이고 데이터가 가운데에 모여있습니다
   
2. **쌍봉우리형 분포(bimodal distribution)**
   - 2개의 봉우리 주변으로 데이터가 모여있는 분포입니다

3. **치우친 분포(skewed distribution)**
   - 비대칭으로 한쪽 꼬리가 다른 쪽 꼬리보다 긴 분포입니다
   - 왼쪽으로 치우친(right-skewed) 분포: 오른쪽 꼬리가 더 깁니다
   - 오른쪽으로 치우친(left-skewed) 분포: 왼쪽 꼬리가 더 깁니다

4. **균등분포(uniform distribution)**
   - 어떤 범위 내의 값이 고르게 나타나는 분포입니다

#### 점도표

수평선 위에 데이터 값에 해당하는 위치에 점을 찍는 그래프입니다. 데이터가 작을 때 유용하지만, 관찰값의 개수가 20~30개를 넘어가면 너무 복잡해집니다.

## 양적 데이터의 수치 요약

### 중심 경향치

#### 1. 최빈값(mode)

관찰값 중에서 발생빈도가 가장 높은 값입니다. 여러 개일 수도 있고, 하나도 없을 수도 있습니다.

#### 2. 평균(mean)

양적 변수의 분포의 균형을 이루는 무게중심의 위치에 해당하는 값입니다. 어떤 변수의 관찰값의 총합을 관찰값의 개수로 나눈 값입니다.

표본 크기가 n인 표본 데이터의 관찰값을 x₁, x₂, ⋯, xₙ이라고 할 때, 표본 평균은:
x̄ = (∑ᵢ₌₁ⁿ xᵢ) / n

**평균의 특징**:
- 표본데이터가 기울어진 분포를 가졌거나 특이점이 있는 경우, 평균이 데이터 전체를 잘 대표하지 못합니다
- 특이점의 영향을 크게 받습니다
- 분포가 좌우 대칭인 경우 평균은 분포의 가운데에 위치합니다
- 분포가 한쪽으로 치우치면 평균은 긴 꼬리 쪽으로 움직이게 됩니다

#### 3. 중앙값(median)

데이터를 크기 순서대로 늘어놓았을 때 정확히 중앙에 위치하는 값입니다.
- 관찰값의 개수가 홀수일 때: 중앙에 위치하는 관찰값
- 관찰값의 개수가 짝수일 때: 중앙에 위치하는 2개 관찰값의 평균

**중앙값의 특징**:
- 특이점의 영향을 거의 받지 않습니다
- 분포가 한쪽으로 쏠려 있거나, 특이점이 존재하는 데이터를 요약할 때 주로 사용됩니다

### 산포 측정치

#### 1. 분산(variance)과 표준편차(standard deviation)

**편차**: 관찰값 - 평균

**분산(variance)**: 편차의 제곱의 평균
- 표본분산 s² = ∑ᵢ₌₁ⁿ(xᵢ - x̄)² / (n-1)

**표준편차(standard deviation)**: 분산의 제곱근
- 표본표준편차 s = √(s²) = √[∑ᵢ₌₁ⁿ(xᵢ - x̄)² / (n-1)]

**분산과 표준편차의 특징**:
- 분산, 표준편차가 크면 데이터가 평균을 중심으로 광범위하게 분포되어 있습니다
- 분산, 표준편차가 작으면 데이터가 평균을 중심으로 조밀하게 모여 있습니다
- 특이점의 영향을 많이 받습니다
- 분산의 단위는 데이터 측정단위의 제곱입니다
- 표준편차의 단위는 데이터 측정단위입니다

#### 2. 변이계수(coefficient of variation)

표준편차를 평균으로 나눈 값으로, 측정 단위나 데이터 중심위치의 차이를 고려하여 변동을 비교할 때 사용합니다.

#### 3. 사분위수(quartiles)와 사분위수 범위

크기 순서대로 늘어놓은 데이터를 4등분하는 값입니다.
- 1사분위수(Q₁): 전체 데이터 중 값이 낮은 1/4과 나머지를 가르는 값
- 2사분위수(Q₂): 중앙값
- 3사분위수(Q₃): 전체 데이터 중 값이 낮은 3/4과 나머지를 가르는 값

**사분위수 범위(InterQuartile Range: IQR)**: Q₃ - Q₁

#### 4. 백분위수(percentile)

p백분위수는 전체 데이터의 p%가 이 값보다 작거나 같은 값입니다.
- 1사분위수 = 25백분위수
- 2사분위수 = 50백분위수 = 중앙값
- 3사분위수 = 75백분위수

#### 5. 범위(range)

관찰값의 최댓값 - 최솟값으로, 데이터의 산포를 설명하는 가장 간단한 통계량입니다. 특이점의 영향을 심하게 받습니다.

### 다섯 수치요약과 상자그림

**다섯 수치요약(five-number summary)**:
- 최솟값, 1사분위수, 중앙값, 3사분위수, 최댓값
- 데이터의 중심위치와 퍼진 정도를 모두 파악할 수 있습니다

**상자그림(boxplot)**:
- 다섯 수치요약을 나타낸 그래프입니다
- 특이점을 식별하는 데 유용합니다

## R 패키지와 데이터 시각화

### R 패키지 설치

R 패키지는 R 자체에 내장되지 않은, 사용자들이 개별적으로 만들어낸 함수들의 모음입니다. CRAN에서 공개된 모든 패키지를 볼 수 있습니다.

#### 패키지 설치 방법

1. RStudio의 Packages 창에서 검색 후 체크박스 선택
2. Tools > Install Packages 메뉴 선택
3. 콘솔에 `install.packages("패키지이름")` 입력

#### 패키지 로드

패키지를 설치한 후, 반드시 '로드(load)'해야 사용할 수 있습니다:
```r
library(패키지이름)
```

### ggplot2 패키지

Wilkinson의 The Grammar of Graphics의 원칙에 따라 그래프를 만들 수 있는 함수들의 모음입니다. 기본 구조에 레이어를 추가하는 방식으로 원하는 그래프의 형태를 지정합니다.

#### 기본 형태
```r
ggplot(data = <DATA>) +
  <GEOM_FUNCTION>(mapping = aes(<MAPPINGS>))
```

- `ggplot()`은 먼저 자료의 좌표축을 만듭니다
- geom function은 mapping = aes() 구문을 통해 x축과 y축 변수를 지정합니다
- 그래프의 종류에 따라 다른 geom function을 사용합니다
- 주의: "+"는 항상 라인의 마지막에 위치해야 합니다

### R 실습 예제

#### 히스토그램

```r
# 기본 히스토그램
hist(데이터벡터)

# 옵션 추가 히스토그램
hist(데이터벡터, breaks=20, main="제목", xlab="x축 레이블", ylab="y축 레이블")
```

#### 점도표

```r
# 기본 점도표
stripchart(데이터벡터, method="stack", pch=19)

# 옵션 추가 점도표
stripchart(데이터벡터, method="stack", pch=19, offset=5, cex=1.5, axes=F, xlim=c(45, 70))
axis(1, at=seq(45, 70, 5))
```

#### 상자그림

```r
# 기본 상자그림
boxplot(데이터벡터, ylab="레이블")
```

#### 요약통계량 계산

```r
# 평균
mean(데이터벡터)

# 분산
var(데이터벡터)

# 표준편차
sd(데이터벡터)

# 중앙값
median(데이터벡터)

# 다섯수치 요약
fivenum(데이터벡터)

# 사분위수 범위
IQR(데이터벡터)

# 범위
range(데이터벡터)
```

## 요약

- 변수는 질적 변수와 양적 변수로 나뉩니다. 질적 변수에는 명목형 변수, 순서형 변수가 있고, 양적 변수에는 연속형 변수와 이산형 변수가 있음.
- 변수의 분포를 나타내기 위하여 각 값의 출현빈도나 비슷한 값끼리 묶은 구간별로 관측된 데이터의 개수를 정리한 표를 도수분포표.
- 막대그래프, 히스토그램, 점도표를 이용하여 데이터를 요약할 수 있음.
- 특이점은 대부분의 데이터로부터 멀리 떨어져있는 관찰값.
- 평균은 분포의 무게 중심으로서 관찰값의 총합을 표본크기로 나눈 값.
- 중앙값은 데이터를 크기 순서대로 늘어놓았을 때 정확히 중앙에 위치하는 값을 말함.
- 분산은 편차의 제곱의 평균이고, 표준편차는 분산의 제곱근.
- 사분위수는 크기 순서대로 늘어놓은 데이터를 4등분하는 값이며, 사분위수 범위는 3사분위수 - 1사분위수입니다.
- 다섯 수치요약이란 양적 데이터의 분포를 최솟값, 1사분위수, 중앙값, 3사분위수, 최댓값으로 정리한 것.
- 상자그림은 다섯 수치요약을 나타낸 그래프.