## 데이터 요약 I

**I. 변수 (Variable)**

1. **기본 개념 복습:**
    - **변수:** 각 단위(관찰 대상)에 대해 관측되는 특성.
    - **데이터:** 하나 이상의 변수에 대한 관찰값의 모음.
2. **변수의 종류:**
    - **질적 변수 (Qualitative / Categorical):** 유한개의 범주 중 하나의 값을 가짐.
        - **명목형 변수 (Nominal):** 범주 간 순서 없음 (예: 성별, 혈액형, 교통수단).
        - **순서형 변수 (Ordinal):** 범주 간 의미 있는 순서 존재 (예: 학력, 비만도).
    - **양적 변수 (Quantitative / Numerical):** 양적인 수치로 측정됨.
        - **연속형 변수 (Continuous):** 특정 구간 내 모든 실수 값 가능 (예: 키, 몸무게, 온도, 시간).
        - **이산형 변수 (Discrete):** 셀 수 있는 값 (정수 값) (예: 책 수, 학생 수, 자동차 사고 건수).
3. **변수의 분포 (Distribution):**
    - **변동성 (Variability):** 데이터 값들은 동일하지 않고 흩어져 있음.
    - **분포:** 변수가 취할 수 있는 값들과 각 값이 발생하는 빈도(Frequency)의 양상.
    - **도수분포표 (Frequency Table):** 데이터 분포를 표로 요약.
        - 질적 변수: 각 **범주(Category)**별 도수(관찰값 개수).
        - 양적 변수: 데이터를 **계급(Class/Bin)**으로 나누고 각 계급별 도수 표시.
            - **계급 설정 시 주의점:**
                - 계급 폭(Width)이 너무 좁거나 넓지 않게 설정 (분포 파악 용이성).
                - 가급적 계급 폭 일정하게 유지.
                - 경계값에 관찰값이 적도록 설정.

**II. 질적 데이터의 요약 (시각화)**

1. **막대그래프 (Bar Chart / Bar Plot):**
    - **개념:** 각 범주의 도수(Frequency) 또는 비율(Percentage/Proportion)을 **막대의 길이**로 표현.
    - **작성 시 유의점:**
        - 명목형 변수: 빈도 순(내림/오름차순) 정렬 권장 (정보 파악 용이).
        - 순서형 변수: 범주의 **고유 순서 유지** 필수.
2. **원그래프 (Pie Chart):**
    - **개념:** 전체에 대한 각 범주의 비율을 **원의 면적(부채꼴)**으로 표현.
    - **단점:** 범주 간 비율 비교가 막대그래프보다 어려움. 최근 선호도 낮아짐.

**III. 양적 데이터의 요약 (시각화 및 수치)**

1. **히스토그램 (Histogram):**
    - **개념:** 양적 데이터의 도수분포표를 **막대 형태**로 시각화. 수평축은 계급, 수직축은 도수 (또는 상대도수/밀도). 막대들은 보통 붙어있음.
    - **용도:** 데이터의 전체적인 **분포 형태 파악**, **특이점(Outlier)** 발견 용이.
    - **주의점:** **계급의 폭(Bin Width)**에 따라 그래프 모양이 달라 보일 수 있음.
    - **분포 유형:**
        - **종 모양 분포 (Bell-shaped):** 좌우 대칭, 중앙 집중.
        - **쌍봉우리형 분포 (Bimodal):** 봉우리가 두 개. (서로 다른 그룹이 섞여 있을 가능성).
        - **치우친 분포 (Skewed):** 비대칭.
            - 오른쪽 꼬리 김 (Right-skewed / Positively skewed): 왼쪽으로 치우침.
            - 왼쪽 꼬리 김 (Left-skewed / Negatively skewed): 오른쪽으로 치우침.
        - **균등 분포 (Uniform):** 모든 값들이 거의 동일한 빈도로 발생.
2. **점도표 (Dot Plot):**
    - **개념:** 수평선 위에 각 데이터 값 위치에 **점을 찍어** 표현.
    - **용도:** **데이터 수가 적을 때** 개별 값의 분포 파악에 유용. (데이터 많으면 복잡해짐).
3. **양적 데이터의 수치 요약:**
    - **중심 경향치 (Measure of Central Tendency):** 데이터의 중심 위치.
        - **최빈값 (Mode):** 가장 빈번하게 나타나는 값. (없거나 여러 개일 수 있음).
        - **평균 (Mean):** 모든 관찰값의 합을 개수로 나눈 값 (산술 평균). 분포의 **무게 중심**.
            - 표본 평균(x̄) = Σxᵢ / n
            - **특징:** 특이점(Outlier)이나 치우친 분포에 **영향을 많이 받음**.
    - **산포도 (Measure of Dispersion/Spread):** 데이터가 흩어진 정도.
        - **편차 (Deviation):** 개별 관찰값 - 평균 (xᵢ - x̄).
        - **분산 (Variance):** 편차 제곱의 평균. 데이터가 평균으로부터 얼마나 떨어져 있는지 나타냄.
            - 표본 분산(s²) = Σ(xᵢ - x̄)² / (n-1) *(n-1로 나누는 이유: 불편 추정량)*
        - **표준편차 (Standard Deviation):** 분산의 양의 제곱근. 원래 데이터와 단위가 같아 해석 용이.
            - 표본 표준편차(s) = √s²
            - **특징:** 클수록 데이터가 넓게 퍼져 있음. 작을수록 평균 주위에 밀집. **특이점에 영향 많이 받음**.
    - **상대적 산포도:**
        - **변이 계수 (Coefficient of Variation - CV):** 측정 단위나 평균이 다른 두 집단의 산포도를 비교할 때 사용.
            - CV = (표준편차 / 평균) (단위 없음, 보통 %로 표현).
            - 값이 클수록 평균 대비 상대적 변동성이 큼.

**IV. R 패키지 설치 및 활용 (ggplot2 중심)**

1. **R 패키지:**
    - R의 기본 기능 외 추가 기능을 제공하는 함수/데이터 모음. CRAN 통해 공유/설치.
2. **ggplot2 패키지:**
    - "Grammar of Graphics" 기반의 강력하고 유연한 시각화 패키지. 레이어(Layer) 추가 방식으로 그래프 구성.
3. **패키지 설치:** (`install.packages()` 함수 또는 RStudio 메뉴/패널 이용). **한 번만** 수행.
    
    ```
    install.packages("ggplot2")
    install.packages("forcats") # 막대 정렬 등 범주형 변수 처리 유용
    
    ```
    
4. **패키지 로드:** (R 세션 시작 시 또는 스크립트 상단에서 `library()` 함수 이용). **사용 전 매번** 필요.
    
    ```
    library(ggplot2)
    library(forcats) # 예제 코드에서 사용
    
    ```
    
5. **ggplot2 그래프 그리기 기본 구조:**
    
    ```
    ggplot(data = <데이터프레임>, mapping = aes(<매핑정보>)) +
      <GEOM_함수>()
    
    ```
    
    - `ggplot()`: 그래프 초기화, 데이터 및 축/색상 등 미적 요소 매핑(aes) 지정.
    - `geom_...()`: 실제 그래프 형태(점, 선, 막대 등) 지정.
    - `+`: 레이어 추가 (축 이름 변경 `xlab()`, `ylab()`, 테마 설정 `theme()` 등). **+는 항상 줄 끝에 위치**.
6. **예제 코드 활용:**
    - **막대그래프:** `geom_bar()`. 범주 순서 정렬 위해 `forcats::fct_infreq()` 사용 가능. y축을 직접 지정할 때는 `stat="identity"` 옵션 추가.
    - **원그래프:** `geom_bar(stat="identity")` + `coord_polar("y")`. 축 텍스트/격자 등 제거 위해 `theme()` 사용.

**핵심 요약:**

- 데이터 분석의 첫걸음은 **변수의 유형(질적/양적, 명목/순서, 연속/이산)**을 파악하는 것입니다.
- 질적 데이터는 **막대그래프, 원그래프** 등으로 빈도나 비율을 시각화합니다.
- 양적 데이터는 **히스토그램, 점도표** 등으로 분포 형태를 시각화하고, **평균(중심), 분산/표준편차(산포도)** 등의 수치로 요약합니다.
- 데이터 요약 시 **특이점(Outlier)**의 영향을 고려해야 하며, 특히 평균과 표준편차는 특이점에 민감합니다.
- R의 **ggplot2 패키지**는 문법 기반의 강력한 시각화 도구로, 다양한 그래프를 유연하게 생성할 수 있습니다. 패키지 사용 전 **설치**와 **로드**가 필요합니다.

## 데이터 요약 II

**I. 상자그림, 중앙값, 사분위수 범위**

1. **평균의 특징 복습:**
    - 분포가 대칭이면 중심 위치 잘 나타냄.
    - 분포가 치우치거나 특이점(Outlier)이 있으면 그쪽으로 끌려가므로 **데이터 대표성이 떨어질 수 있음**.
2. **중앙값 (Median):**
    - **개념:** 데이터를 크기 순으로 나열했을 때 **정확히 가운데** 위치하는 값.
    - **계산:**
        - 데이터 개수(n) 홀수: `(n+1)/2` 번째 값.
        - 데이터 개수(n) 짝수: 가운데 두 값 (`n/2` 번째와 `n/2 + 1` 번째)의 평균.
    - **특징:**
        - **특이점의 영향을 거의 받지 않음** (로버스트(Robust) 통계량).
        - 분포가 치우쳤거나 특이점이 있을 때 **평균보다 중심 위치를 더 잘 나타낼 수 있음**.
3. **사분위수 (Quartiles):**
    - **개념:** 크기 순으로 정렬된 데이터를 **4등분**하는 값.
    - **종류:**
        - **1사분위수 (Q1, Lower Quartile):** 하위 25% 지점의 값.
        - **2사분위수 (Q2, Median):** 하위 50% 지점의 값 = **중앙값**.
        - **3사분위수 (Q3, Upper Quartile):** 하위 75% 지점의 값.
    - **사분위수 범위 (IQR: InterQuartile Range):** 데이터의 중간 50%가 퍼져 있는 정도.
        - **계산:** `IQR = Q3 - Q1`.
        - **특징:** 범위(Range)와 달리 **특이점의 영향을 덜 받음**.
4. **백분위수 (Percentile):**
    - **개념:** 전체 데이터의 p%가 해당 값보다 작거나 같게 되는 값. (p백분위수).
    - **사분위수와의 관계:** Q1 = 25백분위수, Q2 = 50백분위수(중앙값), Q3 = 75백분위수.
    - **활용 예시:** 상대적 위치 파악 (예: 은지 체중은 상위 25%에 해당).
5. **범위 (Range):**
    - **개념:** 최댓값 - 최솟값. 데이터 산포를 나타내는 가장 간단한 통계량.
    - **단점:** **특이점의 영향**을 매우 크게 받음.
6. **다섯 수치 요약 (Five-number Summary) & 상자 그림 (Boxplot):**
    - **다섯 수치 요약:** 데이터 분포의 핵심 정보를 5개 수치로 요약 (최솟값, Q1, 중앙값(Q2), Q3, 최댓값). 데이터 중심 위치와 퍼진 정도를 함께 파악 가능.
    - **상자 그림 (Boxplot):** 다섯 수치 요약을 **시각화**한 그래프.
        - 상자(Box): Q1 ~ Q3 (IQR) 범위 표시. 상자 안 선은 중앙값(Q2).
        - 수염(Whisker): 일반적으로 상자 끝에서 IQR의 1.5배 이내의 최솟값/최댓값까지 선으로 표시.
        - 특이점(Outlier): 수염 밖에 위치하는 값들을 점 등으로 별도 표시.
        - **용도:** 분포의 대칭성, 퍼진 정도, 특이점 유무 등을 한눈에 파악 가능. 여러 그룹 간 분포 비교에 유용.

**II. 분포와 요약 통계량 선택**

1. **데이터 중심 위치 요약:**
    - **평균:** 분포가 **대칭**적이고 특이점 없을 때 가장 적합.
    - **중앙값:** 분포가 **치우쳤거나 특이점** 있을 때 평균보다 로버스트하여 더 적합.
    - **최빈값:** 분포의 봉우리(Peak) 위치 파악. (중심 위치와 다를 수 있음, 명목형 데이터에도 사용).
2. **분포 형태와 중심 위치 관계:**
    - **종 모양 (대칭):** 평균 ≈ 중앙값 ≈ 최빈값.
    - **오른쪽 꼬리 김 (Left-skewed):** 최빈값 < 중앙값 < 평균. (평균이 꼬리 쪽으로 끌려감).
    - **왼쪽 꼬리 김 (Right-skewed):** 평균 < 중앙값 < 최빈값.
    - **쌍봉우리형:** 최빈값이 2개 나타날 수 있음.
3. **데이터 산포 요약:**
    - **분산/표준편차:** 데이터가 평균 주위에 얼마나 퍼져 있는지 나타냄. 클수록 많이 퍼짐. **특이점 영향 큼**. 표준편차는 원래 단위와 같아 해석 용이.
    - **범위:** 가장 간단하나 **특이점 영향 매우 큼**.
    - **사분위수 범위(IQR):** 데이터 중간 50%의 퍼진 정도. **특이점 영향 적음**.
4. **분산과 분포 형태:** 평균이 같아도 분산(표준편차)이 다르면 분포의 퍼진 정도가 다름.

**III. R 실습**

1. **히스토그램 (`hist()`):**
    - 기본 사용: `hist(데이터벡터)`.
    - 주요 옵션: `breaks`(계급 개수 또는 경계값 지정), `main`(제목), `xlab`, `ylab`(축 이름), `xlim`, `ylim`(축 범위).
2. **점도표 (`stripchart()`):**
    - 기본 사용: `stripchart(데이터벡터)`.
    - 주요 옵션: `method="stack"`(점 쌓기), `pch`(점 모양), `offset`(점 간격), `cex`(점 크기), `axes=F`(축 숨김), `xlim`(축 범위).
    - 축 추가: `axis(1, at=...)`.
    - 평균 표시: `points(평균값, y좌표, ...)` (다른 점과 구분되도록 `pch`, `col` 등 지정).
3. **상자 그림 (`boxplot()`):**
    - 기본 사용: `boxplot(데이터벡터)`.
    - 주요 옵션: `ylab`(y축 이름). (여러 그룹 비교 시 `boxplot(값~그룹변수, data=...)` 형태 사용).
4. **요약 통계량 함수:**
    - `mean(x)`: 평균
    - `var(x)`: (표본)분산
    - `sd(x)`: (표본)표준편차
    - `median(x)`: 중앙값
    - `fivenum(x)`: 다섯 수치 요약 (Min, Q1, Median, Q3, Max 순서)
    - `quantile(x)`: 백분위수 (기본값: 0%, 25%(Q1), 50%(Median), 75%(Q3), 100%(Max))
    - `IQR(x)`: 사분위수 범위 (Q3 - Q1)
    - `range(x)`: 범위 (최솟값, 최댓값 반환)

**핵심 요약:**

- **중앙값**과 **사분위수 범위(IQR)**는 **특이점(Outlier)에 덜 민감(Robust)**하므로, 데이터가 치우치거나 특이값이 있을 때 평균/표준편차보다 중심 위치와 산포를 더 잘 나타낼 수 있습니다.
- **다섯 수치 요약**과 이를 시각화한 **상자 그림(Boxplot)**은 데이터 분포의 중심, 퍼진 정도, 대칭성, 특이점 유무를 한눈에 파악하는 데 매우 유용합니다.
- 데이터의 **분포 형태**(대칭, 치우침, 봉우리 개수 등)를 파악하고 **특이점 유무**를 확인하여, 그 특성에 맞는 **적절한 요약 통계량(평균 vs. 중앙값, 표준편차 vs. IQR)**을 선택하는 것이 중요합니다.
- R에서는 `hist()`, `stripchart()`, `boxplot()` 함수로 다양한 시각화를 할 수 있으며, `mean()`, `median()`, `sd()`, `IQR()`, `fivenum()` 등의 함수로 주요 요약 통계량을 쉽게 계산할 수 있습니다.